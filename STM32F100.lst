
STM32F100.elf:     file format elf32-littlearm

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .vectors      00000134  00000000  00000000  00008000  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  1 .text         0000003c  00000134  00000134  00008134  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  2 .text.Reset_Handler 0000004c  00000170  00000170  00008170  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  3 .text.Default_Handler 00000004  000001bc  000001bc  000081bc  2**1
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  4 .text.startup 0000004c  000001c0  000001c0  000081c0  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  5 .ARM.attributes 0000002f  00000000  00000000  0000820c  2**0
                  CONTENTS, READONLY
  6 .comment      00000070  00000000  00000000  0000823b  2**0
                  CONTENTS, READONLY
  7 .debug_info   000000cb  00000000  00000000  000082ab  2**0
                  CONTENTS, READONLY, DEBUGGING
  8 .debug_abbrev 000000c5  00000000  00000000  00008376  2**0
                  CONTENTS, READONLY, DEBUGGING
  9 .debug_aranges 00000040  00000000  00000000  0000843b  2**0
                  CONTENTS, READONLY, DEBUGGING
 10 .debug_line   000000d9  00000000  00000000  0000847b  2**0
                  CONTENTS, READONLY, DEBUGGING
 11 .debug_str    000000fd  00000000  00000000  00008554  2**0
                  CONTENTS, READONLY, DEBUGGING
 12 .debug_frame  00000048  00000000  00000000  00008654  2**2
                  CONTENTS, READONLY, DEBUGGING
 13 .debug_ranges 00000010  00000000  00000000  0000869c  2**0
                  CONTENTS, READONLY, DEBUGGING
SYMBOL TABLE:
00000000 l    d  .vectors	00000000 .vectors
00000134 l    d  .text	00000000 .text
00000170 l    d  .text.Reset_Handler	00000000 .text.Reset_Handler
000001bc l    d  .text.Default_Handler	00000000 .text.Default_Handler
000001c0 l    d  .text.startup	00000000 .text.startup
00000000 l    d  .ARM.attributes	00000000 .ARM.attributes
00000000 l    d  .comment	00000000 .comment
00000000 l    d  .debug_info	00000000 .debug_info
00000000 l    d  .debug_abbrev	00000000 .debug_abbrev
00000000 l    d  .debug_aranges	00000000 .debug_aranges
00000000 l    d  .debug_line	00000000 .debug_line
00000000 l    d  .debug_str	00000000 .debug_str
00000000 l    d  .debug_frame	00000000 .debug_frame
00000000 l    d  .debug_ranges	00000000 .debug_ranges
00000000 l    df *ABS*	00000000 Objects/startup.o
0000017e l       .text.Reset_Handler	00000000 LoopCopyDataInit
00000176 l       .text.Reset_Handler	00000000 CopyDataInit
00000196 l       .text.Reset_Handler	00000000 LoopFillZerobss
00000190 l       .text.Reset_Handler	00000000 FillZerobss
000001bc l       .text.Default_Handler	00000000 Infinite_Loop
00000000 l    df *ABS*	00000000 Initialize.c
00000000 l    df *ABS*	00000000 main.c
00000000 l    df *ABS*	00000000 
000001bc  w    F .text.Default_Handler	00000004 EXTI2_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DebugMon_Handler
000001bc  w    F .text.Default_Handler	00000004 TIM1_CC_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 HardFault_Handler
000001bc  w    F .text.Default_Handler	00000004 SysTick_Handler
000001bc  w    F .text.Default_Handler	00000004 PVD_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 PendSV_Handler
000001bc  w    F .text.Default_Handler	00000004 NMI_Handler
000001bc  w    F .text.Default_Handler	00000004 EXTI3_IRQHandler
20000000 g       .text.startup	00000000 _start_data
20000000 g       .text.startup	00000000 _end_data
000001bc  w    F .text.Default_Handler	00000004 EXTI0_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 I2C2_EV_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM1_UP_TIM16_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 UsageFault_Handler
000001bc  w    F .text.Default_Handler	00000004 SPI1_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TAMPER_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM6_DAC_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA2_Channel2_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA1_Channel4_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 ADC1_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 USART3_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 RTC_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA1_Channel7_IRQHandler
00000170  w    F .text.Reset_Handler	00000038 Reset_Handler
000001bc  w    F .text.Default_Handler	00000004 UART5_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM4_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA2_Channel1_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 I2C1_EV_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA1_Channel6_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 UART4_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA2_Channel4_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM3_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 RCC_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA1_Channel1_IRQHandler
000001bc g       .text.Default_Handler	00000004 Default_Handler
000001bc  w    F .text.Default_Handler	00000004 CEC_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 EXTI15_10_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM14_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM13_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM12_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM7_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM5_IRQHandler
20001ffc g       .text.startup	00000000 _end_stack
000001bc  w    F .text.Default_Handler	00000004 EXTI9_5_IRQHandler
0000020c g       *ABS*	00000000 _start_data_flash
000001bc  w    F .text.Default_Handler	00000004 SPI2_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 MemManage_Handler
000001c0 g     F .text.startup	0000004c main
20000000 g       .text.startup	00000000 _start_stack
000001bc  w    F .text.Default_Handler	00000004 SVC_Handler
000001bc  w    F .text.Default_Handler	00000004 DMA2_Channel5_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA1_Channel5_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 EXTI4_IRQHandler
00000148 g     F .text	00000028 SystemInit
000001bc  w    F .text.Default_Handler	00000004 TIM1_TRG_COM_TIM17_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA1_Channel3_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 FSMC_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 WWDG_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM2_IRQHandler
20000000 g       .text.startup	00000000 _end_bss
000001bc  w    F .text.Default_Handler	00000004 EXTI1_IRQHandler
20000000 g       .text.startup	00000000 _start_bss
20000000 g       .text.startup	00000000 _end
000001bc  w    F .text.Default_Handler	00000004 RTCAlarm_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 USART2_IRQHandler
00000000 g     O .vectors	00000000 g_pfnVectors
000001bc  w    F .text.Default_Handler	00000004 I2C2_ER_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA1_Channel2_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 FLASH_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 BusFault_Handler
000001bc  w    F .text.Default_Handler	00000004 USART1_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 SPI3_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 I2C1_ER_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 DMA2_Channel3_IRQHandler
000001bc  w    F .text.Default_Handler	00000004 TIM1_BRK_TIM15_IRQHandler



Disassembly of section .text:

00000134 <SystemInit-0x14>:
 134:	0000020c 	.word	0x0000020c
 138:	20000000 	.word	0x20000000
 13c:	20000000 	.word	0x20000000
 140:	20000000 	.word	0x20000000
 144:	20000000 	.word	0x20000000

00000148 <SystemInit>:
	volatile uint32_t	regState;

	  //Set the Clock config register to: SYSCLK=PLL, PLL Source=HSI clock, PLL is x6, MCO=PLL/2 output at MCO pin 29
	//RCC_CFGR=0x4100002; // Sets MCO to output SYSCLK, PLL x6, HSI clock as PLL source, PLL as SYSCLK source

	  RCC_CFGR=0x5000000; //MCO output of HSI clock (8MHz)
 148:	4b08      	ldr	r3, [pc, #32]	; (16c <SystemInit+0x24>)
 14a:	f04f 62a0 	mov.w	r2, #83886080	; 0x5000000
 14e:	601a      	str	r2, [r3, #0]
	  //RCC_CFGR=0x4000000; //MCO output of SYSCLK

	regState=RCC_CR;
 150:	f853 2c04 	ldr.w	r2, [r3, #-4]

#include "Headers/STM32F100.h"
void SystemInit(void);

void SystemInit (void)
{
 154:	b082      	sub	sp, #8
	//RCC_CFGR=0x4100002; // Sets MCO to output SYSCLK, PLL x6, HSI clock as PLL source, PLL as SYSCLK source

	  RCC_CFGR=0x5000000; //MCO output of HSI clock (8MHz)
	  //RCC_CFGR=0x4000000; //MCO output of SYSCLK

	regState=RCC_CR;
 156:	9201      	str	r2, [sp, #4]
	regState=regState | 0x1000000 ; //switch on the PLL
 158:	9a01      	ldr	r2, [sp, #4]
 15a:	f042 7280 	orr.w	r2, r2, #16777216	; 0x1000000
 15e:	9201      	str	r2, [sp, #4]
	RCC_CR=regState;
 160:	9a01      	ldr	r2, [sp, #4]
 162:	f843 2c04 	str.w	r2, [r3, #-4]
}
 166:	b002      	add	sp, #8
 168:	4770      	bx	lr
 16a:	bf00      	nop
 16c:	40021004 	.word	0x40021004

Disassembly of section .text.Reset_Handler:

00000170 <Reset_Handler>:
 170:	2100      	movs	r1, #0
 172:	f000 b804 	b.w	17e <LoopCopyDataInit>

00000176 <CopyDataInit>:
 176:	4b0c      	ldr	r3, [pc, #48]	; (1a8 <LoopFillZerobss+0x12>)
 178:	585b      	ldr	r3, [r3, r1]
 17a:	5043      	str	r3, [r0, r1]
 17c:	3104      	adds	r1, #4

0000017e <LoopCopyDataInit>:
 17e:	480b      	ldr	r0, [pc, #44]	; (1ac <LoopFillZerobss+0x16>)
 180:	4b0b      	ldr	r3, [pc, #44]	; (1b0 <LoopFillZerobss+0x1a>)
 182:	1842      	adds	r2, r0, r1
 184:	429a      	cmp	r2, r3
 186:	f4ff aff6 	bcc.w	176 <CopyDataInit>
 18a:	4a0a      	ldr	r2, [pc, #40]	; (1b4 <LoopFillZerobss+0x1e>)
 18c:	f000 b803 	b.w	196 <LoopFillZerobss>

00000190 <FillZerobss>:
 190:	2300      	movs	r3, #0
 192:	f842 3b04 	str.w	r3, [r2], #4

00000196 <LoopFillZerobss>:
 196:	4b08      	ldr	r3, [pc, #32]	; (1b8 <LoopFillZerobss+0x22>)
 198:	429a      	cmp	r2, r3
 19a:	f4ff aff9 	bcc.w	190 <FillZerobss>
 19e:	f7ff ffd3 	bl	148 <SystemInit>
 1a2:	f000 f80d 	bl	1c0 <main>
 1a6:	4770      	bx	lr
 1a8:	0000020c 	.word	0x0000020c
 1ac:	20000000 	.word	0x20000000
 1b0:	20000000 	.word	0x20000000
 1b4:	20000000 	.word	0x20000000
 1b8:	20000000 	.word	0x20000000

Disassembly of section .text.Default_Handler:

000001bc <ADC1_IRQHandler>:
 1bc:	f7ff bffe 	b.w	1bc <ADC1_IRQHandler>

Disassembly of section .text.startup:

000001c0 <main>:

int main(void)
{

  // First switch on power to the GPIO unit. Allocate pin29 to MCO clock and pin30 to toggled port
  RCC_APB2ENR= 0x4; // Start clock to GPIO port A
 1c0:	4b10      	ldr	r3, [pc, #64]	; (204 <main+0x44>)
 1c2:	2204      	movs	r2, #4
 1c4:	601a      	str	r2, [r3, #0]


  GPIOA_CRH = 0x19; // Set PA8 to be alternate function with GPIO push-pull (CNF=00) and Output GPIO 10MHz (MODE=01)
 1c6:	f5a3 3384 	sub.w	r3, r3, #67584	; 0x10800
 1ca:	3b14      	subs	r3, #20
 1cc:	2219      	movs	r2, #25
 1ce:	601a      	str	r2, [r3, #0]
#include "Headers/STM32F100.h"



int main(void)
{
 1d0:	b082      	sub	sp, #8

  GPIOA_CRH = 0x19; // Set PA8 to be alternate function with GPIO push-pull (CNF=00) and Output GPIO 10MHz (MODE=01)
                    // Set PA9 to be GPIO push-pull (CNF=00) and Output GPIO 10MHz (MODE=01)

  // Now pulse pin PA9 in a loop
  volatile int i=0; // GNU compiler will optimize away the loop if i is not made volatile
 1d2:	2300      	movs	r3, #0
 1d4:	9301      	str	r3, [sp, #4]

  while(1) // Roughly 10 cycles per i=1. Total cycles per while loop is 118 for i=5. So pulse frq=(1/8MHz)x118 = 67.797KHz
  {
	  GPIOA_BSRR=0x200; // Set PA9
 1d6:	4b0c      	ldr	r3, [pc, #48]	; (208 <main+0x48>)
 1d8:	f44f 7200 	mov.w	r2, #512	; 0x200
 1dc:	601a      	str	r2, [r3, #0]
	  for (i=0;i<5;i++);
 1de:	2200      	movs	r2, #0
 1e0:	9201      	str	r2, [sp, #4]
 1e2:	9a01      	ldr	r2, [sp, #4]
 1e4:	2a04      	cmp	r2, #4
 1e6:	dc02      	bgt.n	1ee <main+0x2e>
 1e8:	9a01      	ldr	r2, [sp, #4]
 1ea:	3201      	adds	r2, #1
 1ec:	e7f8      	b.n	1e0 <main+0x20>
	  GPIOA_BSRR=0x2000000; // Clear PA9
 1ee:	f04f 7200 	mov.w	r2, #33554432	; 0x2000000
 1f2:	601a      	str	r2, [r3, #0]
	  for (i=0;i<20;i++);
 1f4:	2300      	movs	r3, #0
 1f6:	9301      	str	r3, [sp, #4]
 1f8:	9b01      	ldr	r3, [sp, #4]
 1fa:	2b13      	cmp	r3, #19
 1fc:	dceb      	bgt.n	1d6 <main+0x16>
 1fe:	9b01      	ldr	r3, [sp, #4]
 200:	3301      	adds	r3, #1
 202:	e7f8      	b.n	1f6 <main+0x36>
 204:	40021018 	.word	0x40021018
 208:	40010810 	.word	0x40010810
